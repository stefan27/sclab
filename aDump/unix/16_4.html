<!DOCTYPE html>
<html>
<head lang="ru">
    <meta charset="UTF-8">
    <title>lab4</title>
    <!--<link rel="stylesheet" href="reset.css">-->
    <!-- <link rel="stylesheet" href="style.css"> -->
    <style>
        html, body, div, span, applet, object, iframe,
        h1, h2, h3, h4, h5, h6, p, blockquote, pre,
        a, abbr, acronym, address, big, cite, code,
        del, dfn, em, img, ins, kbd, q, s, samp,
        small, strike, strong, sub, sup, tt, var,
        b, u, i, center,
        dl, dt, dd, ol, ul, li,
        fieldset, form, label, legend,
        table, caption, tbody, tfoot, thead, tr, th, td,
        article, aside, canvas, details, embed,
        figure, figcaption, footer, header, /*hgroup,*/
        menu, nav, output, ruby, section, summary,
        time, mark, audio, video {
            margin: 0;
            padding: 0;
            border: 0;
            font-size: 100%;
            font: inherit;
            vertical-align: baseline;
        }

        /* HTML5 display-role reset for older browsers */
        article, aside, details, figcaption, figure,
        footer, header, /*hgroup,*/
        menu, nav, section {
            display: block;
        }

        body {
            line-height: 1;
        }

        ol, ul {
            list-style: none;
        }

        blockquote, q {
            quotes: none;
        }

        blockquote:before, blockquote:after,
        q:before, q:after {
            content: '';
            content: none;
        }

        table {
            border-collapse: collapse;
            border-spacing: 0;
        }

        body {
            color: #000000;
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;

            font-size: 14px;
            line-height: 1.42857143;
            color: #333;
        }

        header {
            color: #333;
            background-color: #EEEEEE;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            text-align: center;
            border-bottom-left-radius: 10px;
            border-bottom-right-radius: 10px;
        }

        header h1 {
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            font-weight: 500;
            font-size: 63px;
            line-height: 2.5em;

        }

        .content {
            max-width: 750px;
            margin-left: auto;
            margin-right: auto;

        }

        h2 {
            font-size: 30px;
            font-family: inherit;
            font-weight: 500;
            line-height: 1.1;
            padding-bottom: 9px;
            margin: 40px 0 20px;
            border-bottom: 1px solid #eee;
        }

        img {
            margin: 15px auto;
            width: 100%;
        }

        a, a:hover, a:active, a:visited {
            color: #333;
        }

    </style>
</head>
<body>
<header>
    <h1>Lab#4 pl</h1>
</header>

<div class="content">

<h2>Задание</h2>
<p>
    Написати на мові Perl скрипт, який прочитає зміст усіх файлів, що передані йому в командній лінії та об'єднає їх в один файл. Якщо серед переданих файлів будуть файли в форматі HTML, то в них необхідно знищити всі теги.
</p>

<h2>Решение</h2>
<p>
    Аргументы, которые я ввел в командной попадают в массив @ARGV.
    В цикле для каждого значения @ARGV проверяю название файла и 
    с помощью регулярных выражений заменяю теги на пустые строки.
    После цикла записую все данные в файл.s
</p>
<h2>Исходный код:</h2>

<pre>
<xmp>
#!/usr/bin/perl
use strict;
use warnings;

my $outStr = "";
my $fileIn = "";
my $str = "";

for(my $i = 0; $i < (0+@ARGV); $i++) {

    $fileIn = $ARGV[$i];    

    open(my $in, '<:encoding(UTF-8)', $fileIn)
    or die "Could not open file '$fileIn' $!";

    while (my $buf = <$in>) {
        $str = $str . $buf;
    }

    close $in;

    if($fileIn =~ /\.html$/) {
        $str =~ s/\<.*?\>//g; #not greedy
    }

    $outStr = $outStr . $str;
    $str = "";
}


my $fileOut = 'out.txt';
unlink($fileOut);
open(my $out, '>:encoding(UTF-8)', $fileOut)
or die "Could not open file '$fileOut' $!";

print $out $outStr;
close $out;   
</xmp>
</pre>
    




</body>
</html>